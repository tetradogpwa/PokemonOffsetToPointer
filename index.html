<html lang="es">

<head>
    <link rel="manifest" href="manifest.json">
    <script async src="https://cdn.jsdelivr.net/npm/pwacompat@2.0.9/pwacompat.min.js" integrity="sha384-VcI6S+HIsE80FVM1jgbd6WDFhzKYA0PecD/LcIyMQpT4fMJdijBh0I7Iblaacawc" crossorigin="anonymous"></script>
    <style href="style.css" type="text/css"></style>
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" type="image/png" sizes="512x512" href="icon.png">
    <link rel="apple-touch-icon" type="image/png" sizes="512x512" href="icon.png">
    <script src="pokemonOffsetToPointer.js"></script>
</head>

<body>
    <script language="javascript">
        window.onload = () => inicializar();


        function inicializar() {

            document.getElementById("btnCopiarOffset").addEventListener("copy", (e) => {
                CopiarToClipBoard(e, "inpOffset");

            });
            document.getElementById("btnCopiarPointer").addEventListener("copy", (e) => {
                CopiarToClipBoard(e, "inpPointer");

            });
            document.getElementById("btnPegarOffset").addEventListener("paste", (e) => {
                document.getElementById("inpOffset").value = PegarToClipBoard(e);
                GenerarPointer();

            });
            document.getElementById("btnPegarPointer").addEventListener("paste", (e) => {
                document.getElementById("inpPointer").value = PegarToClipBoard(e);
                GenerarOffset();

            });

            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/PokemonOffsetToPointer/sw.js');
            }
            CargarCampos();
        }

        function GenerarPointer() {
            var offset = document.getElementById("inpOffset").value;
            if (offset != "") {
                document.getElementById("inpPointer").value = CalculaPointer(offset);
                GuardaCampos();
            }
        }

        function GenerarOffset() {
            var pointer = document.getElementById("inpPointer").value;
            if (pointer != "") {
                document.getElementById("inpOffset").value = CalculaOffset(pointer);
                GuardaCampos();
            }
        }

        function CopiarToClipBoard(e, inPutId) {
            /* Get the text field */
            var copyText = document.getElementById(inPutId);

            e.clipboardData.setData("text/plain", copyText.value);
        }

        function PegarToClipBoard(e) {
            // Get pasted data via clipboard API
            return e.clipboardData.getData('Text');
        }


        function Reset() {
            document.getElementById("inpOffset").value = "";
            document.getElementById("inpPointer").value = "";
            GuardaCampos();
        }

        function CargarCampos() {
            document.getElementById("inpOffset").value = localStorage.getItem("offset");
            GenerarPointer();
        }

        function GuardaCampos() {
            localStorage.setItem("offset", document.getElementById("inpOffset").value);
        }
    </script>
    <table>
        <tbody>
            <tr>
                <td>Offset</td>
                <td><input id="inpOffset" placeholder="Offset"></td>
                <td><input id="btnPegarOffset" type="button" value="Pegar"></input>
                </td>
                <td><input id="btnCopiarOffset" type="button" value="Copiar"></input>
                </td>
            </tr>
            <tr>
                <td>Pointer</td>
                <td><input id="inpPointer" placeholder="Pointer"></td>
                <td><input id="btnPegarPointer" type="button" value="Pegar"></input>
                </td>
                <td><input id="btnCopiarPointer" type="button" value="Copiar"></input>
                </td>
            </tr>

            <tr>
                <td><input type="button" onclick="GenerarOffset()" value="Offset"></input>
                </td>
                <td><input type="button" onclick="GenerarPointer()" value="Pointer"></input>
                </td>
                <td><input type="button" onclick="Reset()" value="Reset"></input>
                </td>
            </tr>
        </tbody>
    </table>

</body>

</html>